<!DOCTYPE HTML>
<html>
<head>
	<title>OpenLayers Simplest Example</title>
	<meta charset="utf-8" />
	<style>
	html, body {margin: 0; padding: 0; height: 100%;}
	</style>
</head>
<body>
<div id="demoMap" style="height:100%"></div>
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script>
    var map, pos, lon, lat, zoom;
    
    var zoom           = 12;

    var showMap = function(){
      map = new OpenLayers.Map("demoMap");
      var mapnik = new OpenLayers.Layer.OSM();
      map.addLayer(mapnik);
      pos = new OpenLayers.LonLat(1491073, 6893447);
      map.setCenter(pos, zoom);
    }();

    var updatePosition = function(pos){

    lon = pos.coords.longitude;
    lat = pos.coords.latitude;
 
      var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
      var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
      var position       = new OpenLayers.LonLat(lon, lat).transform( fromProjection, toProjection);
 

 
      var markers = new OpenLayers.Layer.Markers( "Markers" );
      map.addLayer(markers);
      markers.addMarker(new OpenLayers.Marker(position));
 
      map.setCenter(position, zoom);

    }


    navigator.geolocation.getCurrentPosition(updatePosition, function(data){ console.log(data)});

</script>
</body>
</html>
