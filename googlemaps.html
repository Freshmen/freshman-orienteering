<!DOCTYPE HTML>
<html>
<head>
	<title>OpenLayers Simplest Example</title>
	<meta charset="utf-8" />
	<style>
	html, body {margin: 0; padding: 0; height: 100%;}
	</style>
</head>
<body>
<div id="demoMap" style="height:100%"></div>
<script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script>
  var map;
  function initialize() {
    var mapOptions = {
    zoom: 10,
    center: new google.maps.LatLng(52.539558, 13.404848),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById('demoMap'), mapOptions);
  }
  
  google.maps.event.addDomListener(window, 'load', initialize);
  
  var updatePosition = function(pos) {
    var position = new google.maps.LatLng(pos.coords.latitude,
                                          pos.coords.longitude);
    var marker = new google.maps.Marker({
          map: map,
          position: position
    });
    var circle = new google.maps.Circle({
      map: map,
      radius: Math.min(pos.coords.accuracy, 1000), /* TODO: create logic */
      fillColor: '#AA0000',
      strokeColor: '#AA0000',
      strokeOpacity: 0.4
    });
    circle.bindTo('center', marker, 'position');

    map.setCenter(position);
    map.setZoom(13);
  }
  
  navigator.geolocation.getCurrentPosition(updatePosition, function(data){ console.log(data)});

</script>
</body>
</html>
